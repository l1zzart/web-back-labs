{% extends "base.html" %}

{% block lab %}Лабораторная работа 3{% endblock %}

{% block main %}
    <h1>Поиск спортивных автомобилей</h1>

    <form method="GET">
        <div style="margin-bottom: 20px;">
            <label>Минимальная цена:</label>
            <input type="number" name="min_price" value="{{ min_price }}" 
                   placeholder="{{ min_all_price }}" 
                   style="margin: 0 10px; padding: 5px;">
            
            <label>Максимальная цена:</label>
            <input type="number" name="max_price" value="{{ max_price }}" 
                   placeholder="{{ max_all_price }}" 
                   style="margin: 0 10px; padding: 5px;">
            
            <button type="submit" style="padding: 5px 15px; margin-right: 10px;">Искать</button>
            <button type="submit" name="reset" value="1" style="padding: 5px 15px;">Сброс</button>
        </div>
    </form>

    <div style="margin-bottom: 15px;">
        {% if products_count == total_count %}
            <strong>Все автомобили: {{ products_count }} шт.</strong>
        {% else %}
            <strong>Найдено автомобилей: {{ products_count }} из {{ total_count }}</strong>
        {% endif %}
    </div>

    {% if products %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 50px;">
            {% for product in products %}
                <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: #f9f9f9;">
                    <h3 style="margin: 0 0 10px 0; color: #d32f2f;">{{ product.name }}</h3>
                    <div><strong>Цена:</strong> {{ "{:,}".format(product.price).replace(",", " ") }} руб.</div>
                    <div><strong>Бренд:</strong> {{ product.brand }}</div>
                    <div><strong>Год:</strong> {{ product.year }}</div>
                    <div><strong>Мощность:</strong> {{ product.horsepower }} л.с.</div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 40px; color: #666; margin-bottom: 50px;">
            <h3>Не найдено ни одного автомобиля</h3>
            <p>Попробуйте изменить параметры поиска</p>
        </div>
    {% endif %}
{% endblock %}
