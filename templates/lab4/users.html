{% extends "base.html" %}

{% block lab %}Список пользователей{% endblock %}

{% block main %}
    <h1>Список пользователей</h1>
    <p>Добро пожаловать, {{ session.name }}!</p>
    
    <table border="1" style="border-collapse: collapse; width: 100%; margin: 20px 0;">
        <thead>
            <tr style="background-color: #f2f2f2;">
                <th style="padding: 10px;">Логин</th>
                <th style="padding: 10px;">Имя</th>
                <th style="padding: 10px;">Пол</th>
                <th style="padding: 10px;">Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td style="padding: 10px;">{{ user.login }}</td>
                <td style="padding: 10px;">{{ user.name }}</td>
                <td style="padding: 10px;">
                    {% if user.gender == 'male' %}Мужской{% else %}Женский{% endif %}
                </td>
                <td style="padding: 10px;">
                    {% if user.is_current %}
                        <form action="/lab4/users/edit" method="get" style="display: inline;">
                            <button type="submit">Редактировать</button>
                        </form>
                        <form action="/lab4/users/delete" method="post" style="display: inline; margin-left: 5px;">
                            <input type="hidden" name="login" value="{{ user.login }}">
                            <button type="submit" onclick="return confirm('Вы уверены, что хотите удалить свой аккаунт?')">Удалить</button>
                        </form>
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div>
        <a href="/lab4/login">Вернуться на главную</a>
    </div>
{% endblock %}
